# .gitlab-ci.yml - Fixed stages
stages:
  - mirror

mirror_to_github:
  stage: mirror
  tags:
    - trainer
  image: alpine/git
  before_script:
    - git config --global user.email "huydd@iceteasoftware.com"
    - git config --global user.name "huyddits"
  script:
    - echo "Mirroring to GitHub..."
    - git remote add github https://$GITHUB_USERNAME:$GITHUB_TOKEN@github.com/$GITHUB_USERNAME/ct-nextjs-amplify.git || echo "Remote exists"
    - git push github $CI_COMMIT_REF_NAME --force
    - echo "Mirror completed"
  only:
    - staging
    - uat