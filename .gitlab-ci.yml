# .gitlab-ci.yml - Fixed YAML syntax
image: alpine/git

stages:
  - mirror

variables:
  GIT_DEPTH: 0

mirror_to_github:
  stage: mirror
  tags:
    - trainer
  before_script:
    - git config --global user.email "huydd@iceteasoftware.com"
    - git config --global user.name "huyddits"
  script:
    - echo "Mirroring to GitHub..."
    - git remote add github https://$GITHUB_USERNAME:$GITHUB_TOKEN@github.com/$GITHUB_USERNAME/nextjs-pwa-amplify.git
    - git push github $CI_COMMIT_REF_NAME --force
    - echo "Mirror completed successfully"
  only:
    - uat
    - staging
    - /^feature\/.*$/
